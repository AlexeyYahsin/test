'use strict'


const personalMovieDB = {

    count: '',
    movie: {},
    actors: {},
    genres: [],
    privat: false,
    
    start: function () {

        this.count = +prompt('Сколько фильмов вы уже посмотрели?', '');
        while (this.count == '' || isNaN(this.count)) {
            alert('Не верный ответ!')
            this.start();
        }

        if (this.count == null){
            return;
        }
            this.rememberMyFilms();
    },

    rememberMyFilms: function () {

        for (let i = 0; i < 2; i++) {

            let lastFilms = prompt('Один из последних просмотренных фильмов?', ''),
                filmRating = prompt('На сколько оцените его?', '');

            if (lastFilms != null && filmRating != null && lastFilms != '' && lastFilms != '' && lastFilms.length < 50) {
                this.movie[lastFilms] = filmRating;
            } else {
                alert('Опять?');
                i--;
            }
        }
             this.detectPersonalLevel();
    },

    detectPersonalLevel: function(){

        switch (true) {

            case this.count === 0: {
                alert('Ошибка!');
                break;
            }
            case this.count < 10: {
                alert('Просмотренно довольно мало фильмов');
                this.shovMyBD();
                break
            }
            case this.count < 30: {
                alert('Вы классический зритель');
                this.shovMyBD();
                break
            }
            case this.count > 30: {
                alert('А Вы киноман!');
                this.shovMyBD();
                break
            }
            default:
                alert('Произошла ошибка');
                break;
        }
    },

    shovMyBD: function(){

        if (this.privat === false){
            console.log(this);
            this.toggleVisibleMyBD();
        }

        this.writeYourGenres();
    },

    toggleVisibleMyBD: function (){
        this.privat = !this.privat;
    },

    writeYourGenres: function () {

            const guest = confirm('Хотите назвать любимые жанры?');
            if (guest) {
                for (let i = 1; i < 4; i++) {

                    let film = prompt(`Введите любимый жанр под номером ${i}`, '');
                    this.genres[i - 1] = film;
                }
            }else{
                this.writeYourGenres();
            }

            this.genres.forEach( (item, index, array)=>{
                console.log(`Любимый жанр #${index + 1} - это ${item}`)
            })
        },

    };

personalMovieDB.start();